# โ ูุธุงู ุงูุชูุฌูู ุงูุฐูู ุนูุฏ ุชุณุฌูู ุงูุฏุฎูู

## ๐ ุงููุตู
ุชู ุฅุถุงูุฉ ูุธุงู ุชูุฌูู ุฐูู ููุชุญ ุงููุญุชูู ุงูููุงุณุจ ุชููุงุฆูุงู ุญุณุจ ููุน ุงุดุชุฑุงู ุงููุณุชุฎุฏู ุนูุฏ ุชุณุฌูู ุงูุฏุฎูู.

## ๐ง ููู ูุนูู ุงููุธุงู

### 1. ุฃููุงุน ุงูุงุดุชุฑุงูุงุช
ุงููุธุงู ูุฏุนู 4 ุฃููุงุน ูู ุงูุงุดุชุฑุงูุงุช:

| ููุน ุงูุงุดุชุฑุงู | ุงููุตู | ุงูุตูุญุฉ ุงูููุชูุญุฉ |
|--------------|-------|-----------------|
| `theorie` | ุงูุฏุฑูุณ ุงููุธุฑูุฉ | `/lessons` |
| `examen` | ุงูุงูุชุญุงูุงุช | `/examen` |
| `praktijk-lessons` | ุงูููุฏูููุงุช ุงูุชุฏุฑูุจูุฉ | `/praktical/lessons` |
| `praktijk-exam` | ุงุฎุชุจุงุฑ ุงูุฎุทุฑ | `/praktical/exam` |

### 2. ุนูุฏ ุงูุงุดุชุฑุงู
ุนูุฏูุง ูุดุชุฑู ุงููุณุชุฎุฏูุ ูุชู ุญูุธ ููุน ุงูุงุดุชุฑุงู ุชููุงุฆูุงู:

```typescript
// ูู CheckoutForm.tsx
let subscriptionType = "theorie"; // ุงููููุฉ ุงูุงูุชุฑุงุถูุฉ

if (selectedCatId === "lessons") {
  subscriptionType = "praktijk-lessons";
} else if (selectedCatId === "exam") {
  subscriptionType = "praktijk-exam";
} else if (selectedCatId === "cat-a" || selectedCatId === "cat-b" || selectedCatId === "cat-c") {
  subscriptionType = "examen";
}
```

### 3. ุนูุฏ ุชุณุฌูู ุงูุฏุฎูู
ุนูุฏูุง ูุณุฌู ุงููุณุชุฎุฏู ุฏุฎููู:

1. **ุฅุฏุฎุงู ุงูุจูุงูุงุช**: ุงูุจุฑูุฏ ุงูุฅููุชุฑููู ููููุฉ ุงููุฑูุฑ
2. **ุงูุชุญูู**: ูุชู ุงูุชุญูู ูู ุงูุจูุงูุงุช ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
3. **ุฌูุจ ููุน ุงูุงุดุชุฑุงู**: ูุชู ุฌูุจ `subscriptionType` ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
4. **ุงูุชูุฌูู ุงูุชููุงุฆู**: ูุชู ูุชุญ ุงูุตูุญุฉ ุงูููุงุณุจุฉ

```typescript
// ูู LoginModal.tsx
if (subscriptionType === "examen") {
  // ูุชุญ ุตูุญุฉ ุงูุงูุชุญุงูุงุช ูุน ูุงุฆูุฉ ุงูุฏุฑูุณ
  window.location.assign(`/examen?email=${email}&cat=${cat}&exp=${exp}`);
} else if (subscriptionType === "praktijk-lessons") {
  // ูุชุญ ุตูุญุฉ ุงูููุฏูููุงุช ุงูุชุฏุฑูุจูุฉ
  window.location.assign(`/praktical/lessons?email=${email}&exp=${exp}`);
} else if (subscriptionType === "praktijk-exam") {
  // ูุชุญ ุตูุญุฉ ุงุฎุชุจุงุฑ ุงูุฎุทุฑ
  window.location.assign(`/praktical/exam?email=${email}&exp=${exp}`);
} else {
  // ูุชุญ ุตูุญุฉ ุงูุฏุฑูุณ ุงููุธุฑูุฉ (ุงููููุฉ ุงูุงูุชุฑุงุถูุฉ)
  window.location.assign(`/lessons?cat=${cat}&user=${email}&exp=${exp}`);
}
```

## ๐ ุงูุชุนุฏููุงุช ุนูู ูุงุนุฏุฉ ุงูุจูุงูุงุช

### ุญูู ุฌุฏูุฏ ูู ุฌุฏูู User
```prisma
model User {
  id               Int      @id @default(autoincrement())
  email            String   @unique
  name             String
  password         String
  phone            String?
  category         String
  paymentType      String
  subscriptionType String?  // โ ุญูู ุฌุฏูุฏ
  expiryDate       DateTime
  status           String
  createdAt        DateTime @default(now())
}
```

### Migration
ุชู ุฅูุดุงุก migration ุฌุฏูุฏ:
```
prisma/migrations/20260220011753_add_subscription_type/migration.sql
```

## ๐ ุงููููุงุช ุงููุนุฏูุฉ

### 1. ูุงุนุฏุฉ ุงูุจูุงูุงุช
- โ `prisma/schema.prisma` - ุฅุถุงูุฉ ุญูู `subscriptionType`

### 2. API
- โ `app/api/subscribe/route.ts` - ุญูุธ ููุน ุงูุงุดุชุฑุงู
- โ `app/api/login/route.ts` - ุฅุฑุฌุงุน ููุน ุงูุงุดุชุฑุงู
- โ `app/api/check-subscription/route.ts` - ุฅุฑุฌุงุน ููุน ุงูุงุดุชุฑุงู

### 3. ุงูููููุงุช
- โ `components/CheckoutForm.tsx` - ุชุญุฏูุฏ ููุน ุงูุงุดุชุฑุงู ุนูุฏ ุงูุฏูุน
- โ `components/LoginModal.tsx` - ุงูุชูุฌูู ุญุณุจ ููุน ุงูุงุดุชุฑุงู

## ๐ฏ ุณููุงุฑูููุงุช ุงูุงุณุชุฎุฏุงู

### ุงูุณููุงุฑูู 1: ุงุดุชุฑุงู ูู ุงูุงูุชุญุงูุงุช
1. ุงููุณุชุฎุฏู ูุฎุชุงุฑ "Theorie Examen" โ Category A
2. ูุฏูุน ููุดุชุฑู
3. ูุชู ุญูุธ `subscriptionType = "examen"`
4. ุนูุฏ ุชุณุฌูู ุงูุฏุฎูู ูุงุญูุงู:
   - ููุชุญ `/examen?email=...&cat=A&exp=...`
   - ูุฑู ูุงุฆูุฉ ุงูุฏุฑูุณ ุงููุชุงุญุฉ ูููุฆุฉ A
   - ูุฎุชุงุฑ ุฏุฑุณ ููุจุฏุฃ ุงูุงุฎุชุจุงุฑ

### ุงูุณููุงุฑูู 2: ุงุดุชุฑุงู ูู ุงูููุฏูููุงุช ุงูุชุฏุฑูุจูุฉ
1. ุงููุณุชุฎุฏู ูุฎุชุงุฑ "Praktijk" โ "Oefenvideo's"
2. ูุฏูุน ููุดุชุฑู
3. ูุชู ุญูุธ `subscriptionType = "praktijk-lessons"`
4. ุนูุฏ ุชุณุฌูู ุงูุฏุฎูู ูุงุญูุงู:
   - ููุชุญ `/praktical/lessons?email=...&exp=...`
   - ูุฑู ูุงุฆูุฉ ุงูููุฏูููุงุช ุงูุชุฏุฑูุจูุฉ (12 ููุฏูู)

### ุงูุณููุงุฑูู 3: ุงุดุชุฑุงู ูู ุงุฎุชุจุงุฑ ุงูุฎุทุฑ
1. ุงููุณุชุฎุฏู ูุฎุชุงุฑ "Praktijk" โ "Gevaarherkenning"
2. ูุฏูุน ููุดุชุฑู
3. ูุชู ุญูุธ `subscriptionType = "praktijk-exam"`
4. ุนูุฏ ุชุณุฌูู ุงูุฏุฎูู ูุงุญูุงู:
   - ููุชุญ `/praktical/exam?email=...&exp=...`
   - ูุฑู ูุงุฆูุฉ ุงุฎุชุจุงุฑุงุช ุงูุฎุทุฑ (12 ุงุฎุชุจุงุฑ)

### ุงูุณููุงุฑูู 4: ุงุดุชุฑุงู ูู ุงูุฏุฑูุณ ุงููุธุฑูุฉ
1. ุงููุณุชุฎุฏู ูุฎุชุงุฑ "Theorie" โ Category B
2. ูุฏูุน ููุดุชุฑู
3. ูุชู ุญูุธ `subscriptionType = "theorie"`
4. ุนูุฏ ุชุณุฌูู ุงูุฏุฎูู ูุงุญูุงู:
   - ููุชุญ `/lessons?cat=B&user=...&exp=...`
   - ูุฑู ูุงุฆูุฉ ุงูุฏุฑูุณ ุงููุธุฑูุฉ ูููุฆุฉ B (13 ุฏุฑุณ)

## ๐ ุงูุชูุงูู ูุน ูุธุงู ุงูุชูุงุก ุงูุตูุงุญูุฉ

ุงููุธุงู ูุนูู ุจุงูุชูุงูู ูุน ูุธุงู ุงูุชูุงุก ุงูุตูุงุญูุฉ:

1. **ุนูุฏ ุชุณุฌูู ุงูุฏุฎูู**:
   - ูุชู ุงูุชุญูู ูู `expiryDate`
   - ุฅุฐุง ุงูุชูุช ุงูุตูุงุญูุฉ โ ุฑุณุงูุฉ ุชุฌุฏูุฏ
   - ุฅุฐุง ูุงูุช ุณุงุฑูุฉ โ ูุชุญ ุงููุญุชูู ุงูููุงุณุจ

2. **ุนูุฏ ุงูุฏุฎูู ูููุญุชูู**:
   - ูุชู ุงูุชุญูู ูู ุงูุตูุงุญูุฉ ุชููุงุฆูุงู
   - ูุชู ุนุฑุถ ุงูููุช ุงููุชุจูู
   - ุนูุฏ ุงูุชูุงุก ุงูููุช โ ููุน ุงููุตูู

## ๐ ูุซุงู ุนูู ุงูุจูุงูุงุช

### ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
```json
{
  "email": "user@example.com",
  "category": "A",
  "subscriptionType": "examen",
  "expiryDate": "2026-03-06T10:30:00.000Z",
  "status": "active"
}
```

### ุนูุฏ ุชุณุฌูู ุงูุฏุฎูู (API Response)
```json
{
  "success": true,
  "role": "student",
  "cat": "A",
  "email": "user@example.com",
  "subscriptionType": "examen",
  "exp": 1741256400000
}
```

### ุงูุชูุฌูู
```
โ /examen?email=user@example.com&cat=A&exp=1741256400000
```

## ๐จ ุชุฌุฑุจุฉ ุงููุณุชุฎุฏู

### ูุจู ุงูุชุญุฏูุซ
```
ุชุณุฌูู ุฏุฎูู โ ุฏุงุฆูุงู ููุชุญ /lessons
```

### ุจุนุฏ ุงูุชุญุฏูุซ
```
ุชุณุฌูู ุฏุฎูู โ ููุชุญ ุงููุญุชูู ุงูููุงุณุจ:
  - ุงุดุชุฑุงู ุงูุชุญุงูุงุช โ /examen
  - ุงุดุชุฑุงู ููุฏูููุงุช โ /praktical/lessons
  - ุงุดุชุฑุงู ุฎุทุฑ โ /praktical/exam
  - ุงุดุชุฑุงู ูุธุฑู โ /lessons
```

## โ ุงูููุงุฆุฏ

1. โ **ุชุฌุฑุจุฉ ูุณุชุฎุฏู ุฃูุถู**: ูุตู ูุจุงุดุฑุฉ ูููุญุชูู ุงูุฐู ุงุดุชุฑู ููู
2. โ **ุชูููุฑ ุงูููุช**: ูุง ุญุงุฌุฉ ููุจุญุซ ุนู ุงููุญุชูู
3. โ **ูุถูุญ**: ูุนุฑู ุงููุณุชุฎุฏู ูุจุงุดุฑุฉ ูุง ุงุดุชุฑู ููู
4. โ **ูุฑููุฉ**: ูุฏุนู ุฌููุน ุฃููุงุน ุงูุงุดุชุฑุงูุงุช
5. โ **ุฃูุงู**: ุงูุชุญูู ูู ุงูุตูุงุญูุฉ ูู ูู ูุฑุฉ

## ๐งช ุงูุงุฎุชุจุงุฑ

### ุงุฎุชุจุงุฑ ุงุดุชุฑุงู ุงูุงูุชุญุงูุงุช
1. ุงุดุชุฑู ูู "Theorie Examen" โ Category A
2. ุณุฌู ุฎุฑูุฌ
3. ุณุฌู ุฏุฎูู ูุฑุฉ ุฃุฎุฑู
4. ูุฌุจ ุฃู ููุชุญ `/examen` ูุน ูุงุฆูุฉ ุฏุฑูุณ ุงููุฆุฉ A

### ุงุฎุชุจุงุฑ ุงุดุชุฑุงู ุงูููุฏูููุงุช
1. ุงุดุชุฑู ูู "Praktijk" โ "Oefenvideo's"
2. ุณุฌู ุฎุฑูุฌ
3. ุณุฌู ุฏุฎูู ูุฑุฉ ุฃุฎุฑู
4. ูุฌุจ ุฃู ููุชุญ `/praktical/lessons` ูุน ูุงุฆูุฉ ุงูููุฏูููุงุช

### ุงุฎุชุจุงุฑ ุงูุชุญูู ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
```sql
SELECT email, subscriptionType, category, expiryDate 
FROM "User" 
WHERE email = 'test@example.com';
```

## ๐ ุงูุฃูุงู

- โ ููุน ุงูุงุดุชุฑุงู ูุญููุธ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
- โ ูุง ูููู ุงูุชูุงุนุจ ุจู ูู ุงููุชุตูุญ
- โ ูุชู ุงูุชุญูู ูู ูู ุทูุจ API
- โ ุงูุชูุฌูู ูุชู ุนูู ุงูุฎุงุฏู

## ๐ ุฏุนู ุงููุบุงุช

ุงููุธุงู ูุฏุนู 3 ูุบุงุช ูู ุฌููุน ุงูุตูุญุงุช:
- ๐ณ๐ฑ ุงูููููุฏูุฉ (NL)
- ๐ซ๐ท ุงููุฑูุณูุฉ (FR)
- ๐ธ๐ฆ ุงูุนุฑุจูุฉ (AR)

## โ ุงูุฎูุงุตุฉ

ุงููุธุงู ุงูุขู ูุนูู ุจุฐูุงุก:
1. โ ูุญูุธ ููุน ุงูุงุดุชุฑุงู ุนูุฏ ุงูุฏูุน
2. โ ููุชุญ ุงููุญุชูู ุงูููุงุณุจ ุนูุฏ ุชุณุฌูู ุงูุฏุฎูู
3. โ ูุนุฑุถ ูุงุฆูุฉ ุงูุฏุฑูุณ ุงููุฑุชุจุทุฉ ุจุงูุงุดุชุฑุงู
4. โ ูุชุญูู ูู ุงูุตูุงุญูุฉ ุชููุงุฆูุงู
5. โ ูุฏุนู ุฌููุน ุฃููุงุน ุงูุงุดุชุฑุงูุงุช
