# لوحة تحكم المشتركين للأدمن

## نظرة عامة
تم إنشاء صفحة إدارة شاملة للأدمن لعرض وإدارة جميع المشتركين مع إحصائيات مفصلة وفلاتر بحث متقدمة.

## الميزات

### 1. الإحصائيات العامة
- **إجمالي المشتركين**: عدد جميع المشتركين في النظام
- **إجمالي الإيرادات**: المبلغ الإجمالي من جميع الاشتراكات
- **أنواع الباقات**: عدد أنواع الباقات المختلفة

### 2. فلاتر البحث
- **البحث بالاسم أو البريد**: بحث فوري عن المشتركين
- **البحث بالشهر**: عرض المشتركين حسب شهر التسجيل
- **البحث بنوع الباقة**: فلترة حسب نوع الاشتراك

### 3. جدول المشتركين
يعرض معلومات تفصيلية لكل مشترك:
- الاسم
- البريد الإلكتروني
- رقم الهاتف
- الاشتراكات النشطة (يمكن أن يكون لديه أكثر من اشتراك)
- تاريخ انتهاء الاشتراك
- تاريخ التسجيل
- الحالة (نشط/منتهي)

## الوصول إلى الصفحة

### الرابط
```
/admin/subscribers
```

### بيانات الدخول
- **اسم المستخدم**: rami
- **كلمة المرور**: 123

## أسعار الباقات

| نوع الباقة | السعر |
|------------|-------|
| دروس نظرية | €25 |
| امتحانات | €25 |
| دروس عملية - فيديوهات | €49 |
| دروس عملية - إدراك المخاطر | €39 |

## API Endpoint

### GET `/api/admin/subscribers`

**المعاملات (Query Parameters):**
- `name`: البحث بالاسم أو البريد الإلكتروني
- `month`: البحث بالشهر (تنسيق: YYYY-MM)
- `package`: البحث بنوع الباقة

**مثال:**
```
GET /api/admin/subscribers?name=ahmed&month=2026-02&package=theorie
```

**الاستجابة:**
```json
{
  "success": true,
  "data": {
    "users": [
      {
        "id": 1,
        "name": "Ahmed Ali",
        "email": "ahmed@example.com",
        "phone": "+32123456789",
        "category": "B",
        "subscriptionType": "theorie",
        "expiryDate": "2026-03-15T00:00:00.000Z",
        "createdAt": "2026-02-15T10:30:00.000Z",
        "status": "active",
        "subscriptions": [
          {
            "id": 1,
            "subscriptionType": "theorie",
            "category": "B",
            "examCategory": null,
            "expiryDate": "2026-03-15T00:00:00.000Z",
            "isActive": true
          }
        ]
      }
    ],
    "stats": {
      "totalSubscribers": 150,
      "totalRevenue": 4500,
      "packageStats": {
        "theorie": 80,
        "examen": 50,
        "praktijk-lessons": 15,
        "praktijk-exam": 5
      }
    }
  }
}
```

## التصميم

### الألوان
- **الأزرق**: للعناصر الرئيسية والإحصائيات
- **الأخضر**: للإيرادات والحالة النشطة
- **الأحمر**: للحالة المنتهية
- **البنفسجي**: لأنواع الباقات

### البطاقات الإحصائية
- تدرجات لونية جذابة
- أيقونات واضحة
- أرقام كبيرة وواضحة

### الجدول
- تصميم نظيف وسهل القراءة
- ألوان متناوبة للصفوف عند التمرير
- شارات ملونة للاشتراكات والحالة

## أمثلة على الاستخدام

### مثال 1: عرض جميع المشتركين
1. سجل الدخول كأدمن
2. ستظهر جميع المشتركين تلقائياً
3. شاهد الإحصائيات في الأعلى

### مثال 2: البحث عن مشترك معين
1. اكتب اسم المشترك أو بريده في حقل البحث
2. ستظهر النتائج فوراً
3. يمكنك رؤية جميع اشتراكاته

### مثال 3: عرض مشتركي شهر معين
1. اختر الشهر من القائمة المنسدلة
2. ستظهر فقط المشتركين الذين سجلوا في هذا الشهر
3. شاهد إجمالي الإيرادات لهذا الشهر

### مثال 4: فلترة حسب نوع الباقة
1. اختر نوع الباقة من القائمة
2. ستظهر فقط المشتركين في هذه الباقة
3. شاهد عدد المشتركين في هذه الباقة

### مثال 5: دمج الفلاتر
1. ابحث عن اسم + اختر شهر + اختر باقة
2. ستظهر النتائج المطابقة لجميع الشروط
3. اضغط "مسح الفلاتر" للعودة للعرض الكامل

## الميزات التقنية

### 1. البحث الفوري
- يتم تحديث النتائج تلقائياً عند تغيير الفلاتر
- لا حاجة للضغط على زر بحث

### 2. دعم الاشتراكات المتعددة
- يعرض جميع اشتراكات المستخدم
- كل اشتراك له شارة منفصلة

### 3. الحالة الديناميكية
- يتم حساب الحالة (نشط/منتهي) بناءً على تاريخ الانتهاء
- ألوان مختلفة للحالات المختلفة

### 4. التنسيق العربي
- التواريخ بالتنسيق العربي
- الأرقام بالتنسيق العربي
- واجهة RTL كاملة

## الأمان

### تسجيل الدخول
- يجب تسجيل الدخول للوصول إلى الصفحة
- بيانات الدخول محمية

### الصلاحيات
- فقط الأدمن يمكنه الوصول
- لا يمكن للمشتركين العاديين الوصول

## التنقل

### من صفحة المشتركين
- **إدارة الأسئلة**: الانتقال إلى صفحة إدارة الأسئلة
- **تسجيل الخروج**: العودة لشاشة تسجيل الدخول

### من صفحة الأسئلة
- يمكن إضافة زر للانتقال إلى صفحة المشتركين

## الإحصائيات المتقدمة

### إجمالي الإيرادات
يتم حسابها بناءً على:
- عدد الاشتراكات لكل نوع
- سعر كل نوع من الباقات
- الصيغة: `عدد الاشتراكات × سعر الباقة`

### توزيع الباقات
يعرض عدد المشتركين في كل نوع باقة:
```
دروس نظرية: 80 مشترك
امتحانات: 50 مشترك
دروس عملية - فيديوهات: 15 مشترك
دروس عملية - إدراك المخاطر: 5 مشترك
```

## التحسينات المستقبلية (اختياري)

1. **تصدير البيانات**: تصدير قائمة المشتركين إلى Excel/CSV
2. **الرسوم البيانية**: إضافة charts لعرض الإحصائيات
3. **الإشعارات**: إشعارات للاشتراكات القريبة من الانتهاء
4. **تعديل الاشتراك**: إمكانية تعديل أو تمديد اشتراك المستخدم
5. **السجل**: عرض سجل جميع العمليات
6. **الفواتير**: إنشاء وطباعة الفواتير

## الاختبار

### اختبار 1: الوصول إلى الصفحة
1. افتح `/admin/subscribers`
2. سجل الدخول (rami / 123)
3. يجب أن تظهر لوحة التحكم

### اختبار 2: عرض الإحصائيات
1. تحقق من ظهور 3 بطاقات إحصائية
2. تحقق من الأرقام الصحيحة

### اختبار 3: البحث
1. اكتب اسم مشترك في حقل البحث
2. تحقق من ظهور النتائج المطابقة

### اختبار 4: الفلاتر
1. اختر شهر معين
2. اختر نوع باقة
3. تحقق من تطبيق الفلاتر

### اختبار 5: مسح الفلاتر
1. طبق بعض الفلاتر
2. اضغط "مسح الفلاتر"
3. يجب أن تعود جميع النتائج

## ملاحظات مهمة

1. **الأسعار الافتراضية**: الأسعار محددة في الكود، يمكن تعديلها حسب الحاجة
2. **الاشتراكات المتعددة**: النظام يدعم عرض جميع اشتراكات المستخدم
3. **الأداء**: يتم جلب البيانات من قاعدة البيانات مباشرة
4. **التحديث التلقائي**: يتم تحديث النتائج عند تغيير الفلاتر

## الخلاصة

لوحة تحكم شاملة للأدمن تتيح:
- ✅ عرض جميع المشتركين
- ✅ إحصائيات مفصلة
- ✅ بحث وفلترة متقدمة
- ✅ عرض الاشتراكات المتعددة
- ✅ واجهة عربية جميلة
- ✅ تصميم عصري وسهل الاستخدام
