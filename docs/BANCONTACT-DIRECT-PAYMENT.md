# ูุธุงู ุงูุฏูุน ุงููุจุงุดุฑ ุนุจุฑ Bancontact ู PayPal

## โ ุงูุชุญุฏูุซุงุช ุงููููุฐุฉ

### 1. ูุชุญ Bancontact ูุจุงุดุฑุฉ
**ุงูููู:** `components/CheckoutForm.tsx`

**ุงูุชุบููุฑุงุช:**
- ุนูุฏ ุงุฎุชูุงุฑ Bancontact ูุงูุถุบุท ุนูู "ุฅุฑุณุงู"ุ ูุชู ูุชุญ ุชุทุจูู Bancontact ูุจุงุดุฑุฉ
- ูุง ูุชู ุนุฑุถ modal ูุนูููุงุช ุงูุฏูุน
- ูุชู ูุชุญ ุงูุชุทุจูู ุจุงุณุชุฎุฏุงู deep link: `bancontact://payment?amount=X&reference=BCT_XXX`
- ุฅุฐุง ูู ูุนูู ุงูุชุทุจููุ ูุชู ูุชุญ ูููุน Bancontact ุจุนุฏ 1.5 ุซุงููุฉ

```typescript
// ูุชุญ ุชุทุจูู Bancontact ูุจุงุดุฑุฉ
const bancontactUrl = `bancontact://payment?amount=${amount}&reference=${reference}&description=Driving+School+Subscription`;
window.location.href = bancontactUrl;

// ุงุญุชูุงุทู: ูุชุญ ุงููููุน
setTimeout(() => {
  window.open('https://www.bancontact.com/nl', '_blank');
}, 1500);
```

### 2. ูุชุญ PayPal ูุจุงุดุฑุฉ
**ุงูุชุบููุฑุงุช:**
- ุนูุฏ ุงุฎุชูุงุฑ PayPal ูุงูุถุบุท ุนูู "ุฅุฑุณุงู"ุ ูุชู ูุชุญ PayPal ูู ูุงูุฐุฉ ุฌุฏูุฏุฉ
- ูุง ูุชู ุนุฑุถ modal ูุนูููุงุช ุงูุฏูุน
- ูุชู ูุชุญ PayPal.me ูุจุงุดุฑุฉ ูุน ุงููุจูุบ

```typescript
// ูุชุญ PayPal ูุจุงุดุฑุฉ
window.open(`https://www.paypal.com/paypalme/drivingschool/${amount}`, '_blank');
```

### 3. Modal ุงูุชุธุงุฑ ุจุณูุท
**ุงูุชุบููุฑุงุช:**
- ูุชู ุนุฑุถ modal ุจุณูุท ุฃุซูุงุก ุงูุชุธุงุฑ ุชุฃููุฏ ุงูุฏูุน
- ูุญุชูู ุนูู:
  - ุฃููููุฉ ูุชุญุฑูุฉ
  - ุฑุณุงูุฉ "ูู ุงูุชุธุงุฑ ุงูุฏูุน"
  - ููุงุท ูุชุญุฑูุฉ
  - ุฒุฑ ุฅูุบุงุก

```typescript
{pendingPayment && !showQRCode && (
  <div className="fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center z-[9999] p-4">
    <div className="bg-white rounded-3xl shadow-2xl p-8 md:p-12 max-w-md w-full">
      {/* ูุญุชูู Modal */}
    </div>
  </div>
)}
```

## ๐ ุณูุฑ ุงูุนูู ุงูุฌุฏูุฏ

### Bancontact
```
1. ุงููุณุชุฎุฏู ูููุฃ ุงููููุฐุฌ
2. ูุฎุชุงุฑ Bancontact
3. ูุถุบุท "ุฅุฑุณุงู"
4. โ ูุชู ุญูุธ ุงูุจูุงูุงุช ุจุญุงูุฉ "pending"
5. ๐ ููุชุญ ุชุทุจูู Bancontact ูุจุงุดุฑุฉ
6. ๐ฑ ุงููุณุชุฎุฏู ูููู ุงูุฏูุน ูู ุงูุชุทุจูู
7. ๐ Webhook ูุฑุณู ุฅุดุนุงุฑ ููุณูุฑูุฑ
8. โ ูุชู ุชูุนูู ุงูุงุดุชุฑุงู
9. โ ูุชู ุฅุนุงุฏุฉ ุงูุชูุฌูู ูููุญุชูู
```

### PayPal
```
1. ุงููุณุชุฎุฏู ูููุฃ ุงููููุฐุฌ
2. ูุฎุชุงุฑ PayPal
3. ูุถุบุท "ุฅุฑุณุงู"
4. โ ูุชู ุญูุธ ุงูุจูุงูุงุช ุจุญุงูุฉ "pending"
5. ๐ ููุชุญ PayPal ูู ูุงูุฐุฉ ุฌุฏูุฏุฉ
6. ๐ณ ุงููุณุชุฎุฏู ูููู ุงูุฏูุน
7. ๐ Webhook ูุฑุณู ุฅุดุนุงุฑ ููุณูุฑูุฑ
8. โ ูุชู ุชูุนูู ุงูุงุดุชุฑุงู
9. โ ูุชู ุฅุนุงุฏุฉ ุงูุชูุฌูู ูููุญุชูู
```

### QR Code
```
1. ุงููุณุชุฎุฏู ูููุฃ ุงููููุฐุฌ
2. ูุฎุชุงุฑ QR Code
3. ูุถุบุท "ุฅุฑุณุงู"
4. โ ูุชู ุญูุธ ุงูุจูุงูุงุช ุจุญุงูุฉ "pending"
5. ๐ฑ ูุชู ุนุฑุถ QR Code
6. ๐ท ุงููุณุชุฎุฏู ููุณุญ ุงูููุฏ
7. ๐ณ ูููู ุงูุฏูุน
8. ๐ Webhook ูุฑุณู ุฅุดุนุงุฑ ููุณูุฑูุฑ
9. โ ูุชู ุชูุนูู ุงูุงุดุชุฑุงู
10. โ ูุชู ุฅุนุงุฏุฉ ุงูุชูุฌูู ูููุญุชูู
```

## ๐ ุงูุฃูุงู

### ูุจู ุงูุฏูุน
- โ ูุง ูุชู ุญูุธ ุฃู ุจูุงูุงุช ูู localStorage
- โ๏ธ status = "pending"
- โ๏ธ isActive = false
- โ ูุง ูููู ุงููุตูู ูููุญุชูู

### ุจุนุฏ ุงูุฏูุน
- โ status = "active"
- โ isActive = true
- โ ูุชู ุญูุธ ุงูุจูุงูุงุช ูู localStorage
- โ ูููู ุงููุตูู ูููุญุชูู

## ๐งช ุงุฎุชุจุงุฑ ุงููุธุงู

### ุงุฎุชุจุงุฑ Bancontact
```bash
# 1. ุงูุชุญ ุงููููุน
# 2. ุงุฎุชุฑ ุฃู ุงุดุชุฑุงู
# 3. ุงููุฃ ุงููููุฐุฌ
# 4. ุงุฎุชุฑ Bancontact
# 5. ุงุถุบุท "ุฅุฑุณุงู"
# 6. ูุฌุจ ุฃู ููุชุญ ุชุทุจูู Bancontact (ุฃู ุงููููุน)
# 7. ูุญุงูุงุฉ webhook:

curl -X POST http://localhost:3000/api/payment-webhook \
  -H "Content-Type: application/json" \
  -d '{
    "paymentMethod": "bancontact",
    "transactionId": "BCT_123456",
    "status": "completed",
    "email": "test@example.com",
    "amount": 25.00
  }'

# 8. ูุฌุจ ุฃู ูุชู ุชูุนูู ุงูุงุดุชุฑุงู ูุฅุนุงุฏุฉ ุงูุชูุฌูู
```

### ุงุฎุชุจุงุฑ PayPal
```bash
# 1. ุงูุชุญ ุงููููุน
# 2. ุงุฎุชุฑ ุฃู ุงุดุชุฑุงู
# 3. ุงููุฃ ุงููููุฐุฌ
# 4. ุงุฎุชุฑ PayPal
# 5. ุงุถุบุท "ุฅุฑุณุงู"
# 6. ูุฌุจ ุฃู ููุชุญ PayPal ูู ูุงูุฐุฉ ุฌุฏูุฏุฉ
# 7. ูุญุงูุงุฉ webhook:

curl -X POST http://localhost:3000/api/payment-webhook \
  -H "Content-Type: application/json" \
  -d '{
    "paymentMethod": "paypal",
    "transactionId": "PP_123456",
    "status": "completed",
    "email": "test@example.com",
    "amount": 25.00
  }'

# 8. ูุฌุจ ุฃู ูุชู ุชูุนูู ุงูุงุดุชุฑุงู ูุฅุนุงุฏุฉ ุงูุชูุฌูู
```

## ๐ฑ Deep Links

### Bancontact Deep Link
```
bancontact://payment?amount=25&reference=BCT_1234567890&description=Driving+School+Subscription
```

**ุงููุนุงููุงุช:**
- `amount`: ุงููุจูุบ ุจุงูุฃุฑูุงู (25 ุฃู 50)
- `reference`: ุฑูู ูุฑุฌุนู ูุฑูุฏ (BCT_ + timestamp)
- `description`: ูุตู ุงูุฏูุน (ุงุฎุชูุงุฑู)

### PayPal Deep Link
```
https://www.paypal.com/paypalme/drivingschool/25
```

**ุงููุนุงููุงุช:**
- `drivingschool`: ุงุณู ุงููุณุชุฎุฏู ูู PayPal (ูุฌุจ ุชุบููุฑู)
- `25`: ุงููุจูุบ

## โ๏ธ ุงูุฅุนุฏุงุฏุงุช ุงููุทููุจุฉ

### 1. ุชุญุฏูุซ ุงุณู ุงููุณุชุฎุฏู ูู PayPal
**ุงูููู:** `components/CheckoutForm.tsx`

```typescript
// ุงุจุญุซ ุนู ูุฐุง ุงูุณุทุฑ ูุบููุฑ "drivingschool" ุฅูู ุงุณู ุงููุณุชุฎุฏู ุงูุญูููู
window.open(`https://www.paypal.com/paypalme/YOUR_USERNAME/${amount}`, '_blank');
```

### 2. ุฅุนุฏุงุฏ Webhooks ูู ุจูุงุจุงุช ุงูุฏูุน

#### Bancontact
1. ุณุฌู ุฏุฎูู ุฅูู ููุญุฉ ุชุญูู Bancontact
2. ุงุฐูุจ ุฅูู Webhooks
3. ุฃุถู URL: `https://yourdomain.com/api/payment-webhook`
4. ุงุฎุชุฑ ุงูุฃุญุฏุงุซ: `payment.completed`, `payment.failed`

**ููุงุญุธุฉ:** ูุชู ุงุณุชุฎุฏุงู ุงูุฑุงุจุท `https://www.bancontact.be` ูููููุน ุงูุงุญุชูุงุทู.

#### PayPal
1. ุณุฌู ุฏุฎูู ุฅูู PayPal Developer
2. ุงุฐูุจ ุฅูู Webhooks
3. ุฃุถู URL: `https://yourdomain.com/api/payment-webhook`
4. ุงุฎุชุฑ ุงูุฃุญุฏุงุซ: `PAYMENT.CAPTURE.COMPLETED`

## ๐ ุงุณุชูุดุงู ุงูุฃุฎุทุงุก

### ุงููุดููุฉ: ูุง ููุชุญ ุชุทุจูู Bancontact
**ุงูุญู:**
1. ุชุฃูุฏ ูู ุฃู ุงูุชุทุจูู ูุซุจุช ุนูู ุงูุฌูุงุฒ
2. ุชุญูู ูู ุตุญุฉ deep link
3. ุณูุชู ูุชุญ ุงููููุน ุชููุงุฆูุงู ูุงุญุชูุงุทู

### ุงููุดููุฉ: ูุง ููุชุญ PayPal
**ุงูุญู:**
1. ุชุญูู ูู ุงุณู ุงููุณุชุฎุฏู ูู ุงูููุฏ
2. ุชุฃูุฏ ูู ุฃู ุงูุญุณุงุจ ูุดุท
3. ุชุญูู ูู ุฃู ุงููุชุตูุญ ูุณูุญ ุจุงูููุงูุฐ ุงูููุจุซูุฉ

### ุงููุดููุฉ: Webhook ูุง ูุนูู
**ุงูุญู:**
1. ุชุญูู ูู logs ุงูุณูุฑูุฑ
2. ุชุฃูุฏ ูู ุตุญุฉ URL ูู ุฅุนุฏุงุฏุงุช ุจูุงุจุฉ ุงูุฏูุน
3. ุงุฎุชุจุฑ ูุญููุงู ุจุงุณุชุฎุฏุงู curl
4. ุงุณุชุฎุฏู ngrok ููุงุฎุชุจุงุฑ ุงููุญูู:
   ```bash
   ngrok http 3000
   # ุงุณุชุฎุฏู URL ูู ngrok ูู ุฅุนุฏุงุฏุงุช webhook
   ```

## ๐ ูุงุฆูุฉ ุงูุชุญูู

- [x] ุฅุฒุงูุฉ modal ูุนูููุงุช ุงูุฏูุน
- [x] ูุชุญ Bancontact ูุจุงุดุฑุฉ
- [x] ูุชุญ PayPal ูุจุงุดุฑุฉ
- [x] ุฅุถุงูุฉ modal ุงูุชุธุงุฑ ุจุณูุท
- [x] ุงูุชุญูู ูู ุญุงูุฉ ุงูุฏูุน ูู 5 ุซูุงูู
- [x] ุฅุนุงุฏุฉ ุชูููุฏ Prisma Client
- [ ] ุชุญุฏูุซ ุงุณู ุงููุณุชุฎุฏู ูู PayPal
- [ ] ุฅุนุฏุงุฏ Webhooks ูู ุจูุงุจุงุช ุงูุฏูุน
- [ ] ุงุฎุชุจุงุฑ ุงููุธุงู ุนูู ุงูุฅูุชุงุฌ

## ๐ฏ ุงููุชูุฌุฉ ุงูููุงุฆูุฉ

- โ ุชุฌุฑุจุฉ ูุณุชุฎุฏู ุณูุณุฉ
- โ ูุชุญ ุจูุงุจุงุช ุงูุฏูุน ูุจุงุดุฑุฉ
- โ ูุง ุญุงุฌุฉ ููุณุฎ ูุนูููุงุช ุงูุฏูุน ูุฏููุงู
- โ ูุธุงู ุขูู ููุญูู
- โ ุงูุชุญูู ุงูุชููุงุฆู ูู ุญุงูุฉ ุงูุฏูุน
