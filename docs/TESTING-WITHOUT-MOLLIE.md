# ุงุฎุชุจุงุฑ ุงููุธุงู ุจุฏูู Mollie

## ๐ ุงููุธุงู ุงูุญุงูู

ุงููุธุงู ูุนูู ุงูุขู **ุจุฏูู Mollie** ููุงุฎุชุจุงุฑ ูุงูุชุทููุฑ:

### โ ูุง ูุนูู:
- ุชุณุฌูู ุงููุณุชุฎุฏููู
- ุญูุธ ุงูุจูุงูุงุช ุจุญุงูุฉ "pending"
- ุนุฑุถ QR Code
- ูุชุญ ุฑุงุจุท Bancontact
- ุงูุชุญูู ูู ุญุงูุฉ ุงูุฏูุน

### โ ูุง ูุง ูุนูู:
- ุงูุฏูุน ุงูุญูููู
- ุชูุนูู ุงูุงุดุชุฑุงู ุชููุงุฆูุงู (ูุญุชุงุฌ webhook ูุฏูู)

## ๐งช ููููุฉ ุงูุงุฎุชุจุงุฑ

### 1. ุชุณุฌูู ูุณุชุฎุฏู ุฌุฏูุฏ

1. ุงูุชุญ ุงููููุน: http://localhost:3000
2. ุงุฎุชุฑ ุฃู ุงุดุชุฑุงู (Theorie, Praktical, Examen)
3. ุงููุฃ ุงููููุฐุฌ:
   - ุงูุงุณู: Test User
   - ุงูุจุฑูุฏ: test@example.com
   - ูููุฉ ุงููุฑูุฑ: 123456
   - ุงููุงุชู: 0123456789

### 2. ุงุฎุชุจุงุฑ QR Code

1. ุงุฎุชุฑ **QR Code** ูุทุฑููุฉ ุฏูุน
2. ุงุถุบุท "ุฅุฑุณุงู"
3. ุณูุธูุฑ QR Code ุจุฑุชูุงูู
4. ูุญุชูู ุนูู ุจูุงูุงุช ุงูุฏูุน ุจุตูุบุฉ JSON

**ููุงุญุธุฉ:** QR Code ููุนุฑุถ ููุท - ูู ูุนูู ุงูุฏูุน ุงูุญูููู

### 3. ุงุฎุชุจุงุฑ Bancontact

1. ุงุฎุชุฑ **Bancontact** ูุทุฑููุฉ ุฏูุน
2. ุงุถุบุท "ุฅุฑุณุงู"
3. ุณูุญุงูู ูุชุญ ุชุทุจูู Bancontact
4. ุฅุฐุง ูู ูุนููุ ุณููุชุญ https://www.bancontact.be

**ููุงุญุธุฉ:** ูู ูุชู ุงูุฏูุน ุงูุญูููู

### 4. ุชูุนูู ุงูุงุดุชุฑุงู ูุฏููุงู (ูุญุงูุงุฉ Webhook)

ุจุนุฏ "ุงูุฏูุน"ุ ุชุญุชุงุฌ ูุชูุนูู ุงูุงุดุชุฑุงู ูุฏููุงู:

#### ุงูุทุฑููุฉ 1: ุจุงุณุชุฎุฏุงู curl

```bash
curl -X POST http://localhost:3000/api/payment-webhook \
  -H "Content-Type: application/json" \
  -d '{
    "paymentMethod": "bancontact",
    "transactionId": "TEST_123456",
    "status": "completed",
    "email": "test@example.com",
    "amount": 25.00
  }'
```

#### ุงูุทุฑููุฉ 2: ุจุงุณุชุฎุฏุงู PowerShell

```powershell
$body = @{
    paymentMethod = "bancontact"
    transactionId = "TEST_123456"
    status = "completed"
    email = "test@example.com"
    amount = 25.00
} | ConvertTo-Json

Invoke-RestMethod -Uri "http://localhost:3000/api/payment-webhook" `
  -Method POST `
  -ContentType "application/json" `
  -Body $body
```

#### ุงูุทุฑููุฉ 3: ุจุงุณุชุฎุฏุงู Postman

1. ุงูุชุญ Postman
2. ุงุฎุชุฑ POST
3. URL: `http://localhost:3000/api/payment-webhook`
4. Headers: `Content-Type: application/json`
5. Body (raw JSON):
```json
{
  "paymentMethod": "bancontact",
  "transactionId": "TEST_123456",
  "status": "completed",
  "email": "test@example.com",
  "amount": 25.00
}
```

### 5. ุงูุชุญูู ูู ุงูุชูุนูู

ุจุนุฏ ุฅุฑุณุงู webhook:

1. ุชุญูู ูู console ุงูุณูุฑูุฑ - ูุฌุจ ุฃู ุชุฑู:
   ```
   ๐ Webhook received: { ... }
   โ Payment successful for: test@example.com
   ๐พ User subscription activated successfully
   ```

2. ุงูุตูุญุฉ ุณุชุชุญุฏุซ ุชููุงุฆูุงู ูุชุนูุฏ ุงูุชูุฌูู ูููุญุชูู

3. ููููู ุงูุฏุฎูู ูููุญุชูู ุงูุขู!

## ๐ ุญุงูุงุช ุงูุงุฎุชุจุงุฑ

### ุญุงูุฉ 1: ุฏูุน ูุงุฌุญ
```json
{
  "paymentMethod": "bancontact",
  "transactionId": "TEST_SUCCESS",
  "status": "completed",
  "email": "test@example.com",
  "amount": 25.00
}
```
**ุงููุชูุฌุฉ:** โ ูุชู ุชูุนูู ุงูุงุดุชุฑุงู

### ุญุงูุฉ 2: ุฏูุน ูุงุดู
```json
{
  "paymentMethod": "bancontact",
  "transactionId": "TEST_FAILED",
  "status": "failed",
  "email": "test@example.com",
  "amount": 25.00
}
```
**ุงููุชูุฌุฉ:** โ ูุง ูุชู ุชูุนูู ุงูุงุดุชุฑุงู

### ุญุงูุฉ 3: ุฏูุน ููุบู
```json
{
  "paymentMethod": "bancontact",
  "transactionId": "TEST_CANCELED",
  "status": "cancelled",
  "email": "test@example.com",
  "amount": 25.00
}
```
**ุงููุชูุฌุฉ:** โ ูุง ูุชู ุชูุนูู ุงูุงุดุชุฑุงู

## ๐ ุงูุชุญูู ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช

### ุจุงุณุชุฎุฏุงู Prisma Studio:

```bash
npx prisma studio
```

ุซู:
1. ุงูุชุญ ุฌุฏูู **User**
2. ุงุจุญุซ ุนู ุงูุจุฑูุฏ: test@example.com
3. ุชุญูู ูู:
   - `status`: ูุฌุจ ุฃู ูููู "active" ุจุนุฏ webhook
   - `expiryDate`: ุชุงุฑูุฎ ุงูุชูุงุก ุงูุงุดุชุฑุงู

4. ุงูุชุญ ุฌุฏูู **Subscription**
5. ุงุจุญุซ ุนู ุงุดุชุฑุงูุงุช ุงููุณุชุฎุฏู
6. ุชุญูู ูู:
   - `isActive`: ูุฌุจ ุฃู ูููู true ุจุนุฏ webhook

## ๐ ุญู ุงููุดุงูู

### ุงููุดููุฉ: QR Code ูุง ูุธูุฑ
**ุงูุญู:**
1. ุชุญูู ูู console ุงููุชุตูุญ ููุฃุฎุทุงุก
2. ุชุฃูุฏ ูู ุชุซุจูุช ููุชุจุฉ qrcode: `npm install qrcode`
3. ุฃุนุฏ ุชุญููู ุงูุตูุญุฉ

### ุงููุดููุฉ: Webhook ูุง ูุนูู
**ุงูุญู:**
1. ุชุญูู ูู ุฃู ุงูุณูุฑูุฑ ูุนูู
2. ุชุญูู ูู ุงูุจุฑูุฏ ุงูุฅููุชุฑููู ูู ุงูุทูุจ
3. ุฑุงุฌุน console ุงูุณูุฑูุฑ ููุฃุฎุทุงุก
4. ุชุฃูุฏ ูู ุฃู ุงููุณุชุฎุฏู ููุฌูุฏ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช

### ุงููุดููุฉ: ูุง ูุชู ุฅุนุงุฏุฉ ุงูุชูุฌูู ุจุนุฏ webhook
**ุงูุญู:**
1. ุชุญูู ูู ุฃู status = "completed" ูู webhook
2. ุชุญูู ูู console ุงููุชุตูุญ
3. ุฌุฑุจ ุฅุนุงุฏุฉ ุชุญููู ุงูุตูุญุฉ ูุฏููุงู

### ุงููุดููุฉ: "User not found"
**ุงูุญู:**
1. ุชุฃูุฏ ูู ุฃู ุงูุจุฑูุฏ ูู webhook ูุทุงุจู ุงูุจุฑูุฏ ุงููุณุฌู
2. ุชุญูู ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช ุจุงุณุชุฎุฏุงู Prisma Studio
3. ุฌุฑุจ ุชุณุฌูู ุงููุณุชุฎุฏู ูุฑุฉ ุฃุฎุฑู

## ๐ ุณููุงุฑูู ุงุฎุชุจุงุฑ ูุงูู

### ุงูุฎุทูุฉ 1: ุชุณุฌูู
```
1. ุงูุชุญ http://localhost:3000/examen
2. ุงุฎุชุฑ "Theorie - 2 weken - โฌ25"
3. ุงููุฃ ุงููููุฐุฌ
4. ุงุฎุชุฑ Bancontact
5. ุงุถุบุท "ุฅุฑุณุงู"
```

### ุงูุฎุทูุฉ 2: ูุญุงูุงุฉ ุงูุฏูุน
```bash
curl -X POST http://localhost:3000/api/payment-webhook \
  -H "Content-Type: application/json" \
  -d '{
    "paymentMethod": "bancontact",
    "transactionId": "TEST_001",
    "status": "completed",
    "email": "YOUR_EMAIL_HERE",
    "amount": 25.00
  }'
```

### ุงูุฎุทูุฉ 3: ุงูุชุญูู
```
1. ุชุญูู ูู console ุงูุณูุฑูุฑ
2. ูุฌุจ ุฃู ุชุฑู: "โ User subscription activated"
3. ุงูุตูุญุฉ ุณุชุนูุฏ ุงูุชูุฌูู ุชููุงุฆูุงู
4. ููููู ุงูุฏุฎูู ูููุญุชูู ุงูุขู!
```

## ๐ฏ ุงูุงูุชูุงู ููุฅูุชุงุฌ

ุนูุฏูุง ุชููู ุฌุงูุฒุงู ููุฏูุน ุงูุญูููู:

1. **ุณุฌู ุญุณุงุจ Mollie**: https://www.mollie.com/be
2. **ุงุญุตู ุนูู API Key**
3. **ุฃุถูู ูู .env**:
   ```env
   MOLLIE_API_KEY=live_xxxxxxxxxx
   NEXT_PUBLIC_BASE_URL=https://yourdomain.com
   ```
4. **ุญุฏูุซ CheckoutForm** ูุงุณุชุฎุฏุงู Mollie API
5. **ุงุฎุชุจุฑ ูู ูุถุน Test ุฃููุงู**
6. **ุงูุดุฑ ููุฅูุชุงุฌ**

## ๐ก ูุตุงุฆุญ

1. **ุงุญุชูุธ ุจุณุฌู** ูุฌููุน webhooks ููุงุฎุชุจุงุฑ
2. **ุงุณุชุฎุฏู emails ูุฎุชููุฉ** ููู ุงุฎุชุจุงุฑ
3. **ุงูุณุญ ูุงุนุฏุฉ ุงูุจูุงูุงุช** ุจูู ุงูุงุฎุชุจุงุฑุงุช ุฅุฐุง ูุฒู ุงูุฃูุฑ
4. **ุฑุงูุจ console ุงูุณูุฑูุฑ** ุฏุงุฆูุงู
5. **ุงุฎุชุจุฑ ุฌููุน ุงูุญุงูุงุช** (ูุฌุงุญุ ูุดูุ ุฅูุบุงุก)

## ๐ ุงูุฃูุงู

**ุชุญุฐูุฑ:** ูุฐุง ุงููุธุงู ููุงุฎุชุจุงุฑ ููุท!

- โ ูุง ุชุณุชุฎุฏูู ูู ุงูุฅูุชุงุฌ
- โ ูุง ููุฌุฏ ุชุญูู ูู ุงูุฏูุน ุงูุญูููู
- โ ุฃู ุดุฎุต ููููู ุฅุฑุณุงู webhook
- โ ุงุณุชุฎุฏู Mollie ููุฅูุชุงุฌ

## ๐ ุงูุฏุนู

ุฅุฐุง ูุงุฌูุช ูุดุงูู:
1. ุฑุงุฌุน console ุงูุณูุฑูุฑ
2. ุฑุงุฌุน console ุงููุชุตูุญ
3. ุชุญูู ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
4. ุฑุงุฌุน ูููุงุช ุงูุชูุซูู ุงูุฃุฎุฑู

---

**ููุงุญุธุฉ:** ูุฐุง ุงููุธุงู ูุคูุช ููุชุทููุฑ. ููุฏูุน ุงูุญููููุ ูุฌุจ ุงุณุชุฎุฏุงู Mollie ุฃู ุจูุงุจุฉ ุฏูุน ุฃุฎุฑู.
